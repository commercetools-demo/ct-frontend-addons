"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { newObj[key] = obj[key]; } } } newObj.default = obj; return newObj; } } function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; } function _nullishCoalesce(lhs, rhsFn) { if (lhs != null) { return lhs; } else { return rhsFn(); } } function _optionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = fn(value); } else if (op === 'call' || op === 'optionalCall') { value = fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; }var _chunk767D7BLLcjs = require('./chunk-767D7BLL.cjs');var Fe={};_chunk767D7BLLcjs.a.call(void 0, Fe,{COMPONENTS:()=>Xt,HOOKS:()=>Yt,PROVIDERS:()=>Gt});var _react = require('react'); var _react2 = _interopRequireDefault(_react);var _swr = require('swr');var ye=({sdk:r,mutatePath:e="/action/cart/getCart"})=>({changePrice:_react.useCallback.call(void 0, async(n,o)=>{let i={lineItemId:n,price:o},s=await r.callAction({actionName:"cart/changePrice",payload:i});_swr.mutate.call(void 0, e,s)},[])});var Ee=({sdk:r,data:e,setError:t,formatMessage:n,onLogin:o})=>{let[i,s]=_react.useState.call(void 0, !1),l=y=>{if(y.message.includes("CSR")){s(!0),t(n({id:"csr.login",defaultMessage:"Please enter the customer's email address"}));return}},a=async()=>{try{let v=await r.composableCommerce.account.login({email:e.email,password:e.password,remember:e.rememberMe});if(_swr.mutate.call(void 0, "/action/account/getAccount"),_swr.mutate.call(void 0, "/action/cart/getCart"),_swr.mutate.call(void 0, "/action/wishlist/getWishlist"),v.isError)throw v.error;v.data.accountId?_optionalChain([o, 'optionalCall', _2 => _2()]):t(n({id:"auth.wrong",defaultMessage:"Wrong email address or password"}))}catch(y){l(y),t(n({id:"wentWrong",defaultMessage:"Sorry. Something went wrong.."}))}},d=async(y,v,h)=>{let g={email:y,password:v,impersonatedCustomerEmail:h},c=await r.callAction({actionName:"account/loginCSR",payload:g});if(_swr.mutate.call(void 0, "/action/account/getAccount"),_swr.mutate.call(void 0, "/action/cart/getCart"),_swr.mutate.call(void 0, "/action/wishlist/getWishlist"),c.isError)throw c.error;return c.data};return{isCSRLogin:i,csrErrorHandler:l,login:()=>{i?d(e.email,e.password,e.impersonatedCustomerEmail):a()}}};var _navigation = require('next/navigation');var _lodashdebounce = require('lodash.debounce'); var _lodashdebounce2 = _interopRequireDefault(_lodashdebounce);var Ve=function(r){return r?r.split("_")[0]:"en"},Ue=function(r,e){return Intl.NumberFormat(Ve(e),{style:"currency",currency:_nullishCoalesce(_optionalChain([r, 'optionalAccess', _3 => _3.currencyCode]), () => ("USD")),maximumFractionDigits:_nullishCoalesce(_optionalChain([r, 'optionalAccess', _4 => _4.fractionDigits]), () => (0)),minimumFractionDigits:_nullishCoalesce(_optionalChain([r, 'optionalAccess', _5 => _5.fractionDigits]), () => (0))}).format((_nullishCoalesce(_optionalChain([r, 'optionalAccess', _6 => _6.centAmount]), () => (0)))/100)},we=function(r,e,t="USD",n=0){return Intl.NumberFormat(Ve(e),{style:"currency",currency:_nullishCoalesce(t, () => ("USD")),maximumFractionDigits:_nullishCoalesce(n, () => (0)),minimumFractionDigits:_nullishCoalesce(n, () => (0))}).format((_nullishCoalesce(r, () => (0)))/100)};var qt=({item:r,price:e,sdk:t,buttonText:n,wrapperClassName:o,priceClassName:i,buttonClassName:s,buttonWrapperClassName:l})=>{let{changePrice:a}=ye({sdk:t}),{locale:d}=_navigation.useParams.call(void 0, ),[p,y]=_react.useState.call(void 0, (_optionalChain([e, 'optionalAccess', _7 => _7.centAmount])||0)/100),[v,h]=_react.useState.call(void 0, Ue(e,d)),[g,c]=_react.useState.call(void 0, !1),m=_react.useMemo.call(void 0, ()=>_optionalChain([e, 'optionalAccess', _8 => _8.currencyCode]),[e]),u=_react.useMemo.call(void 0, ()=>_optionalChain([e, 'optionalAccess', _9 => _9.fractionDigits]),[e]),b=_react.useMemo.call(void 0, ()=>p!==(_optionalChain([e, 'optionalAccess', _10 => _10.centAmount])||0)/100,[p,e]),x=_react.useCallback.call(void 0, async()=>{c(!0),r.lineItemId&&await a(r.lineItemId,{centAmount:p*100,currencyCode:_optionalChain([e, 'optionalAccess', _11 => _11.currencyCode])}),c(!1)},[p,r]),w=_react.useCallback.call(void 0, _lodashdebounce2.default.call(void 0, O=>{let E=parseFloat(O.replace(/[^0-9\.]/g,""));if(isNaN(E))return;y(E);let C=we(E*100,d,m,u);h(C)},1e3),[m,u,d]),k=_react.useCallback.call(void 0, O=>{let E=O.target.value;h(E),w(E)},[w]);return _react2.default.createElement("div",{className:o},_react2.default.createElement("input",{value:v,className:i,type:"text",onChange:k,disabled:g,onBlur:()=>h(we(p*100,d,m,u))}),_react2.default.createElement("div",{className:l},_react2.default.createElement("button",{disabled:!b||g,onClick:x,type:"button",className:s},n)))},Pe=qt;var Jt={superUserData:void 0},qe=_react.createContext.call(void 0, Jt),ze=({children:r,sdk:e})=>{let[t,n]=_react.useState.call(void 0, ),o=_react.useCallback.call(void 0, async()=>{let i=await e.callAction({actionName:"account/getSuperuser"});i.isError||n(i.data.superUser)},[]);return _react.useEffect.call(void 0, ()=>{o()},[]),_react2.default.createElement(qe.Provider,{value:{superUserData:t}},r)},We=()=>_react.useContext.call(void 0, qe);var Gt={SuperUserProvider:ze,useSuperUserContext:We},Xt={StandalonePriceInput:Pe},Yt={useStandalonePrice:ye,useCSRLoginForm:Ee};var De={};_chunk767D7BLLcjs.a.call(void 0, De,{COMPONENTS:()=>hr,PROVIDERS:()=>wr,hooks:()=>Nr});var rr={configurableComponents:[],selectedVariants:[],productAttributes:[],setSelectedVariants:()=>{}},He=_react.createContext.call(void 0, rr),or=({children:r,configurableComponents:e,productAttributes:t})=>{let[n,o]=_react.useState.call(void 0, Array(_optionalChain([e, 'optionalAccess', _12 => _12.length])).fill(null));return _react2.default.createElement(He.Provider,{value:{configurableComponents:e,selectedVariants:n,setSelectedVariants:o,productAttributes:t}},r)},Ke=or,G=()=>_react.useContext.call(void 0, He);var ir={cart:void 0,productAttributes:[]},_e=_react.createContext.call(void 0, ir),lr=({cart:r,productAttributes:e,children:t})=>_react2.default.createElement(_e.Provider,{value:{productAttributes:e,cart:r}},t),Qe=lr,ne=()=>_react.useContext.call(void 0, _e);var ee="bundled_components",dr=()=>{let{cart:r}=ne(),e=o=>(i,s,l)=>{let a=o(i,s,l);return a.error||!a.data?a:{...a,data:n(a.data)}},t=o=>{let i=_optionalChain([r, 'optionalAccess', _13 => _13.lineItems, 'optionalAccess', _14 => _14.find, 'call', _15 => _15(a=>a.lineItemId===o.id)]);if(!i)return{price:0,discountedPrice:0};let s=_optionalChain([i, 'access', _16 => _16.variant, 'optionalAccess', _17 => _17.discountedPrice, 'optionalAccess', _18 => _18.centAmount]);if(!_optionalChain([i, 'access', _19 => _19.variant, 'optionalAccess', _20 => _20.attributes, 'optionalAccess', _21 => _21[ee]]))return{price:0,discountedPrice:0};let l=(_optionalChain([i, 'access', _22 => _22.variant, 'optionalAccess', _23 => _23.attributes, 'optionalAccess', _24 => _24[ee]])).reduce((a,d)=>a+(_optionalChain([d, 'access', _25 => _25.price, 'optionalAccess', _26 => _26.centAmount])||0),0);return{price:l,discountedPrice:s?s+l:void 0}},n=o=>{let i=o.lineItems;if(o&&_optionalChain([i, 'optionalAccess', _27 => _27.length])){let s=_optionalChain([i, 'optionalAccess', _28 => _28.filter, 'call', _29 => _29(a=>!!a.parentId)]),l=_optionalChain([i, 'optionalAccess', _30 => _30.filter, 'call', _31 => _31(a=>!a.parentId)]);return{...o,lineItems:_optionalChain([l, 'optionalAccess', _32 => _32.map, 'call', _33 => _33(a=>{_optionalChain([a, 'access', _34 => _34.variant, 'optionalAccess', _35 => _35.attributes])||(a={...a,variant:{...a.variant,sku:a.sku,attributes:{}}});let d=_optionalChain([s, 'optionalAccess', _36 => _36.filter, 'call', _37 => _37(p=>p.parentId===a.lineItemId)]);return _optionalChain([a, 'access', _38 => _38.variant, 'optionalAccess', _39 => _39.attributes])&&(a.variant.attributes[ee]=[]),_optionalChain([d, 'optionalAccess', _40 => _40.forEach, 'call', _41 => _41(p=>{_optionalChain([a, 'access', _42 => _42.variant, 'optionalAccess', _43 => _43.attributes, 'optionalAccess', _44 => _44[ee], 'access', _45 => _45.push, 'call', _46 => _46(p)])})]),{...a}})])}}return o};return{bundleComponentsIntoLineItems:n,getBundledPrice:t,swrBundleMiddleware:e}},Je=dr;var se=({productAttributes:r})=>({findAttributeLabel:t=>{let n="";return Object.keys(t||{}).forEach(o=>{r.includes(o)&&(n=_optionalChain([t, 'optionalAccess', _47 => _47[o]]))}),n}});var ae=class{};ae.isNumeric=e=>!isNaN(+e),ae.capitaliseFirstLetter=e=>e.charAt(0).toUpperCase()+e.slice(1);var z=class z{};z.formatNumberForCurrency=function(e,t,n="USD",o=0){return z.formatMoneyCurrency({centAmount:e,currencyCode:n,fractionDigits:o},t)},z.formatStringForCurrency=function(e,t,n="USD",o=0){return ae.isNumeric(e)?z.formatNumberForCurrency(parseInt(e,10),t,n,o):(console.error(new Error(`Value (${e}) passed for currency formatting cannot be parsed to a number`)),"")},z.getLocaleFromShortenedLocale=function(e){return_nullishCoalesce({en:"en-US",de:"de-DE"}[e], () => (e))},z.formatMoneyCurrency=function(e,t){return Intl.NumberFormat(z.getLocaleFromShortenedLocale(t),{style:"currency",currency:_nullishCoalesce(_optionalChain([e, 'optionalAccess', _48 => _48.currencyCode]), () => ("USD")),maximumFractionDigits:_nullishCoalesce(_optionalChain([e, 'optionalAccess', _49 => _49.fractionDigits]), () => (0)),minimumFractionDigits:_nullishCoalesce(_optionalChain([e, 'optionalAccess', _50 => _50.fractionDigits]), () => (0))}).format((_nullishCoalesce(_optionalChain([e, 'optionalAccess', _51 => _51.centAmount]), () => (0)))/100)},z.formatForCurrency=(e,t,n="USD",o=0)=>typeof e=="string"?z.formatStringForCurrency(e,t,n,o):typeof e=="number"?z.formatNumberForCurrency(e,t,n,o):z.formatMoneyCurrency(e,t),z.addCurrency=(e,t)=>(e||(e={centAmount:0}),t||(t={centAmount:0}),e.fractionDigits!==t.fractionDigits&&e.fractionDigits&&t.fractionDigits&&console.warn(new Error(`Money with different fraction codes passed to addCurrency, value returned will be innacurate. Value 1: ${e.fractionDigits}, value 2: ${t.fractionDigits}`)),e.currencyCode!==t.currencyCode&&e.currencyCode&&t.currencyCode&&console.warn(new Error(`Money with different currency codes passed to addCurrency, value returned will be innacurate. Value 1: ${e.currencyCode}, value 2: ${t.currencyCode}`)),{fractionDigits:e.fractionDigits||t.fractionDigits,centAmount:e.centAmount+t.centAmount,currencyCode:e.currencyCode||t.currencyCode}),z.subtractCurrency=(e,t)=>(e.fractionDigits!==t.fractionDigits&&console.warn(new Error(`Money with different fraction codes passed to addCurrency, value returned will be innacurate. Value 1: ${e.fractionDigits}, value 2: ${t.fractionDigits}`)),e.currencyCode!==t.currencyCode&&console.warn(new Error(`Money with different currency codes passed to addCurrency, value returned will be innacurate. Value 1: ${e.currencyCode}, value 2: ${t.currencyCode}`)),{fractionDigits:e.fractionDigits||t.fractionDigits,centAmount:e.centAmount-t.centAmount,currencyCode:e.currencyCode||t.currencyCode}),z.multiplyCurrency=(e,t)=>({fractionDigits:e.fractionDigits,centAmount:e.centAmount*t,currencyCode:e.currencyCode});var M=z;var mr=({item:r})=>{let{cart:e,productAttributes:t}=ne(),{findAttributeLabel:n}=se({productAttributes:t}),{locale:o}=_navigation.useParams.call(void 0, ),i=_react.useMemo.call(void 0, ()=>_optionalChain([e, 'optionalAccess', _52 => _52.lineItems, 'optionalAccess', _53 => _53.find, 'call', _54 => _54(s=>s.lineItemId===r.id)]),[e,r]);return i?_react2.default.createElement("div",null,!!_optionalChain([i, 'access', _55 => _55.variant, 'optionalAccess', _56 => _56.attributes, 'optionalAccess', _57 => _57[ee], 'optionalAccess', _58 => _58.length])&&_optionalChain([i, 'access', _59 => _59.variant, 'optionalAccess', _60 => _60.attributes, 'optionalAccess', _61 => _61[ee], 'access', _62 => _62.map, 'call', _63 => _63(s=>_react2.default.createElement("div",{className:"flex items-center",key:s.lineItemId},_react2.default.createElement("p",{className:"text-12 font-semibold leading-loose text-gray-600"},`${s.name}:`,_react2.default.createElement("span",{className:"ml-2 text-10 font-normal"},`${n(_optionalChain([s, 'access', _64 => _64.variant, 'optionalAccess', _65 => _65.attributes]))}`)),_react2.default.createElement("p",{className:"ml-2 text-10 font-normal leading-loose text-gray-600"},_optionalChain([s, 'access', _66 => _66.price, 'optionalAccess', _67 => _67.centAmount])?` ${M.formatForCurrency(s.price,o)}`:"")))])):null},Ge=mr;var _outline = require('@heroicons/react/24/outline');var gr=({product:r,variant:e,onChangeVariantIdx:t,className:n,Select:o})=>{let[i,s]=_react.useState.call(void 0, ),{productAttributes:l}=G(),{findAttributeLabel:a}=se({productAttributes:l}),d=y=>a(_optionalChain([r, 'optionalAccess', _68 => _68.variants, 'access', _69 => _69.find, 'call', _70 => _70(v=>v.sku===y), 'optionalAccess', _71 => _71.attributes])),p=y=>{let v=_optionalChain([r, 'optionalAccess', _72 => _72.variants, 'access', _73 => _73.findIndex, 'call', _74 => _74(h=>h.sku===y)]);t(v),s(_optionalChain([r, 'optionalAccess', _75 => _75.variants, 'access', _76 => _76[v]]))};return _react.useEffect.call(void 0, ()=>{e&&s(e)},[e]),_react2.default.createElement("div",null,_react2.default.createElement("p",{className:"p-4 text-14 font-semibold leading-loose"},r.name),_react2.default.createElement(o,{onChange:y=>p(y),className:n,defaultValue:_optionalChain([i, 'optionalAccess', _77 => _77.sku]),options:_optionalChain([r, 'optionalAccess', _78 => _78.variants, 'access', _79 => _79.map, 'call', _80 => _80(y=>({value:y.sku,name:d(y.sku)}))])}))},Xe=gr;var vr=({product:r,className:e,children:t,Button:n,Select:o,translatedTexts:i})=>{let[s,l]=_react.useState.call(void 0, 0),[a,d]=_react.useState.call(void 0, !0),[p,y]=_react.useState.call(void 0, []),[v,h]=_react.useState.call(void 0, ),[g,c]=_react.useState.call(void 0, ),{configurableComponents:m,setSelectedVariants:u,productAttributes:b}=G(),{findAttributeLabel:x}=se({productAttributes:b}),{locale:w}=_navigation.useParams.call(void 0, ),k=(C,N)=>{y(F=>F.map((I,A)=>A!==N?I:{...I,tempVariant:_optionalChain([I, 'access', _81 => _81.variants, 'optionalAccess', _82 => _82[C]])}))},O=C=>{l(C+1),y(p.map((N,F)=>C!==F?N:{...N,selectedVariant:{...N.tempVariant}}))},E=C=>{y(p.map((N,F)=>s!==F?N:{...N,tempVariant:void 0})),l(C)};return _react.useEffect.call(void 0, ()=>{if(p.length){let C=p.reduce((F,I)=>M.addCurrency(F,_optionalChain([I, 'access', _83 => _83.tempVariant, 'optionalAccess', _84 => _84.price])),{centAmount:0,currencyCode:r.currency}),N=p.reduce((F,I)=>M.addCurrency(F,_optionalChain([I, 'access', _85 => _85.selectedVariant, 'optionalAccess', _86 => _86.price])),{centAmount:0,currencyCode:r.currency});d(p.some(F=>!F.selectedVariant)),h(M.subtractCurrency(C,g||{centAmount:0,currencyCode:r.currency})),c(N),u(p.map(F=>F.selectedVariant))}},[p]),_react.useEffect.call(void 0, ()=>{_optionalChain([m, 'optionalAccess', _87 => _87.length])&&y(m)},[m]),_optionalChain([m, 'optionalAccess', _88 => _88.length])?_react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement("style",null,`
        .tab-panels--selected {
          margin-top: -1px;
        }
        .tab-button--selected {
          margin-bottom: -1px;
        }
      `),_react2.default.createElement("div",{className:e},p.map((C,N)=>_react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement("input",{type:"radio",name:"tabset",className:"hidden",id:`tab${N}`,checked:N===s,onChange:()=>s>N&&E(N)}),_react2.default.createElement("label",{className:`relative inline-block cursor-pointer whitespace-nowrap border-neutral-300 bg-white px-4 py-4 text-12 ${s===N&&"z-10 border-t border-x font-bold"} ${p.length!==s&&"tab-button--selected"}`,htmlFor:`tab${N}`},_react2.default.createElement("span",{className:"flex items-center gap-2"},C.name," ",s>N&&_react2.default.createElement(_outline.CheckIcon,{className:"h-4 w-4 text-primary"}))))),_react2.default.createElement("div",{className:`tab-panels relative ${p.length!==s&&"tab-panels--selected"}`},p.map((C,N)=>_react2.default.createElement("article",{className:`border border-neutral-300 ${N===s?"block":"hidden"}`,key:C.productId},_react2.default.createElement(Xe,{className:"p-4",product:C,onChangeVariantIdx:F=>k(F,N),variant:C.tempVariant,Select:o}),_react2.default.createElement("div",{className:"flex justify-center p-4"},_react2.default.createElement(n,{variant:"primary",size:"full",onClick:()=>O(N),type:"button"},`${_optionalChain([i, 'optionalAccess', _89 => _89.next])} ${_optionalChain([v, 'optionalAccess', _90 => _90.centAmount])&&_optionalChain([v, 'optionalAccess', _91 => _91.centAmount])>=0?"+":""}${M.formatForCurrency(v||0,w)}`)))),p.length===s&&_react2.default.createElement("article",{className:"border-accent-400 max-h-[350px] border p-4"},_react2.default.createElement("span",{className:"text-14 font-semibold"},_optionalChain([i, 'optionalAccess', _92 => _92.summary])),_react2.default.createElement("ul",null,p.map(C=>_react2.default.createElement("li",{key:C.productId},_react2.default.createElement("span",{className:"text-14 font-bold"},C.name,": "),_react2.default.createElement("span",{className:"text-12"},x(_optionalChain([C, 'optionalAccess', _93 => _93.selectedVariant, 'optionalAccess', _94 => _94.attributes])))))),_react2.default.createElement("div",{className:"mt-4"},_react2.default.createElement("span",{className:"text-14"},_optionalChain([i, 'optionalAccess', _95 => _95.total])),_react2.default.createElement("p",{className:"text-16"},`${M.formatForCurrency(_optionalChain([r, 'optionalAccess', _96 => _96.price])*100,w,_optionalChain([r, 'optionalAccess', _97 => _97.currency]))} + ${M.formatForCurrency(g||0)}`)),_react2.default.createElement("button",{className:"text-accent-400 mt-8 underline",onClick:()=>E(0),type:"button"},_optionalChain([i, 'optionalAccess', _98 => _98.back]))),p.length!==s&&_react2.default.createElement("div",{className:"mt-4"},_react2.default.createElement("span",{className:"text-14"},_optionalChain([i, 'optionalAccess', _99 => _99.total])),_react2.default.createElement("p",{className:"text-16"},`${M.formatForCurrency(_optionalChain([r, 'optionalAccess', _100 => _100.price])*100,w,_optionalChain([r, 'optionalAccess', _101 => _101.currency]))} + ${M.formatForCurrency(g||0,w)}`)))),t({isDisabled:a})):t({isDisabled:!1})},Ze=vr;var Cr=(r,e,t,n)=>{let{selectedVariants:o}=G();return{addComponents:_react.useCallback.call(void 0, async s=>{if(o.length===0)return Promise.resolve({});let l={lineItems:s.map(({sku:d,count:p})=>({variant:{sku:d},count:p})),businessUnitKey:t,configurableComponents:_optionalChain([o, 'optionalAccess', _102 => _102.filter, 'call', _103 => _103(Boolean), 'optionalAccess', _104 => _104.map, 'call', _105 => _105(d=>({variant:d,count:1}))])},a=await r.callAction({actionName:"cart/addComponentsToCart",payload:l,query:{businessUnitKey:t,storeKey:n}});return a.isError||e(a.data,{revalidate:!1}),a.isError?{success:!1,message:a.error.message}:{...a.data,success:!0}},[o,t,n])}},Re=Cr;var hr={BundledItems:Ge,ConfigurableComponents:Ze},wr={ConfigurableComponentsProvider:Ke,useConfigurableComponentsContext:G,BundledItemsProvider:Qe,useBundledItemsContext:ne},Nr={useChildComponents:Je,useComponentsCart:Re};var Be={};_chunk767D7BLLcjs.a.call(void 0, Be,{COMPONENTS:()=>Vr,PROVIDERS:()=>Ur,hooks:()=>qr});var _react3 = require('@headlessui/react');var tt=_react.createContext.call(void 0, {setSuperuserCarts:()=>{},superuserStatus:{carts:[],isSuperuser:!1}}),Dr=({children:r,sdk:e})=>{let[t,n]=_react.useState.call(void 0, ),[o,i]=_react.useState.call(void 0, !1),s=_react.useCallback.call(void 0, async()=>{let l=await e.callAction({actionName:"account/getSuperuser"});l.isError||(n(l.data.carts),i(!!l.data.isSuperuser))},[]);return _react.useEffect.call(void 0, ()=>{s()},[]),_react2.default.createElement(tt.Provider,{value:{setSuperuserCarts:n,superuserStatus:{carts:_nullishCoalesce(t, () => ([])),isSuperuser:o}}},r)},rt=Dr,X=()=>_react.useContext.call(void 0, tt);var Or=({setCart:r,createSuperuserCart:e,cartId:t,className:n,associates:o,translate:i})=>{let{superuserStatus:s}=X(),l=async(d,p)=>{_optionalChain([d, 'optionalAccess', _106 => _106.preventDefault, 'optionalCall', _107 => _107()]),_optionalChain([d, 'optionalAccess', _108 => _108.stopPropagation, 'optionalCall', _109 => _109()]);let y=_optionalChain([s, 'optionalAccess', _110 => _110.carts, 'optionalAccess', _111 => _111.find, 'call', _112 => _112(h=>h.id===p)]),v=_optionalChain([o, 'optionalAccess', _113 => _113.find, 'call', _114 => _114(h=>h.accountId===_optionalChain([y, 'optionalAccess', _115 => _115.customerId]))]);await r(p,_optionalChain([v, 'optionalAccess', _116 => _116.email]))},a=async()=>{await e()};return _optionalChain([s, 'optionalAccess', _117 => _117.isSuperuser])?_react2.default.createElement(_react3.Popover,{className:`relative ${n}`},({open:d})=>_react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement(_react3.Popover.Button,{className:`
                      ${d?"":"text-opacity-90"}
                      text-accent-400 flex flex-row text-sm font-medium focus:outline-none`},!d&&_react2.default.createElement(_outline.ChevronDownIcon,{className:"mt-1 h-4 w-4"}),d&&_react2.default.createElement(_outline.ChevronUpIcon,{className:"mt-1 h-4 w-4"})),_react2.default.createElement(_react3.Transition,{as:_react.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1"},_react2.default.createElement(_react3.Popover.Panel,{className:"dark:bg-primary-400 dark:shadow-3xl absolute right-0 top-6 z-50 mr-8 mt-2 max-h-[300px] w-72 origin-top-right overflow-scroll rounded-sm bg-white p-2 shadow-sm ring-1 ring-black/5 focus:outline-none"},_optionalChain([s, 'optionalAccess', _118 => _118.carts, 'optionalAccess', _119 => _119.map, 'call', _120 => _120(p=>_react2.default.createElement("button",{type:"button",className:`inline w-full p-2 text-left text-xs hover:bg-neutral-300 ${p.id===t?"bg-neutral-300":""}`,disabled:p.id===t,key:p.id,onClick:y=>l(y,p.id)},`${i("common.cart")} ${p.origin==="Quote"?` - ${i("cart.createdFromAQuote")} `:""} ${p.origin==="Merchant"?` - ${i("cart.createdByAMerchant")} `:""}`,`${i("cart.with")} ${M.formatForCurrency(p.totalPrice)||0} ${i("cart.total.price")}`,_optionalChain([p, 'access', _121 => _121.createdBy, 'optionalAccess', _122 => _122.associate, 'optionalAccess', _123 => _123.obj, 'optionalAccess', _124 => _124.firstName])&&_optionalChain([p, 'access', _125 => _125.createdBy, 'optionalAccess', _126 => _126.associate, 'optionalAccess', _127 => _127.obj, 'optionalAccess', _128 => _128.lastName])&&_react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement("span",{className:"font-semibold"},` ${i("cart.name")}: `),`${_optionalChain([p, 'access', _129 => _129.createdBy, 'optionalAccess', _130 => _130.associate, 'optionalAccess', _131 => _131.obj, 'optionalAccess', _132 => _132.firstName])} ${_optionalChain([p, 'access', _133 => _133.createdBy, 'optionalAccess', _134 => _134.associate, 'optionalAccess', _135 => _135.obj, 'optionalAccess', _136 => _136.lastName])}`),_optionalChain([p, 'access', _137 => _137.createdBy, 'optionalAccess', _138 => _138.associate, 'optionalAccess', _139 => _139.obj, 'optionalAccess', _140 => _140.email])&&_react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement("span",{className:"font-semibold"},` ${i("cart.email")}: `),_optionalChain([p, 'access', _141 => _141.createdBy, 'optionalAccess', _142 => _142.associate, 'optionalAccess', _143 => _143.obj, 'optionalAccess', _144 => _144.email])),p.id===t&&_react2.default.createElement(_outline.CheckIcon,{className:"ml-2 inline h-4 w-4"})))]),_react2.default.createElement("button",{type:"button",className:"inline w-full p-2 text-left text-xs hover:bg-neutral-300",onClick:a},i("cart.createNewCart")))))):null},ot=Or;var Lr=({activeBusinessUnit:r,className:e,accountId:t,cartAccountId:n,Dropdown:o,translate:i,reassignCart:s})=>{let{superuserStatus:l}=X();return!_optionalChain([l, 'optionalAccess', _145 => _145.isSuperuser])||_optionalChain([r, 'optionalAccess', _146 => _146.associates, 'optionalAccess', _147 => _147.length])===0?null:_react2.default.createElement(o,{onChange:a=>s(_optionalChain([a, 'optionalAccess', _148 => _148.accountId]),_optionalChain([a, 'optionalAccess', _149 => _149.email])),className:e},_react2.default.createElement(o.Button,null,i("cart.superuser.reassign.cart")),_react2.default.createElement(o.Options,null,_optionalChain([r, 'optionalAccess', _150 => _150.associates, 'optionalAccess', _151 => _151.filter, 'call', _152 => _152(a=>a.accountId!==t), 'access', _153 => _153.map, 'call', _154 => _154(a=>_react2.default.createElement(o.Option,{key:a.accountId,value:a},`${a.firstName||""} ${a.lastName||""} ${_optionalChain([a, 'access', _155 => _155.roles, 'optionalAccess', _156 => _156.length])&&` (${a.roles.map(d=>d.key).join(", ")})`}`,n===a.accountId&&_react2.default.createElement(_outline.CheckIcon,{className:"ml-2 inline h-4 w-4"})))])))},nt=Lr;var Er=(r,e)=>{let{setSuperuserCarts:t}=X(),n=async(l,a)=>{let d=await r.callAction({actionName:`cart/setCart?id=${l}`,payload:{email:a}});return d.isError||e(d.data,{revalidate:!1}),window.location.replace("/"),d.isError?{}:d.data},o=async()=>{let l=await r.callAction({actionName:"cart/createSuperuserCart"});return s(),l.isError||e(l.data,{revalidate:!1}),l.isError?{}:l.data},i=async(l,a)=>{let d=await r.callAction({actionName:"cart/reassignCart",payload:{accountId:l,email:a}});return d.isError||e(d.data,{revalidate:!1}),d.isError?{}:d.data},s=async()=>{let l=await r.callAction({actionName:"cart/getAllSuperuserCartsInStore"});l.isError||t(l.data)};return{setCart:n,createSuperuserCart:o,reassignCart:i}},st=Er;var Vr={CartBrowser:ot,CartReassignButton:nt},Ur={SuperuserProvider:rt,useSuperuserContext:X},qr={useSuperuserCarts:st};var Me={};_chunk767D7BLLcjs.a.call(void 0, Me,{COMPONENTS:()=>Ko,HOOKS:()=>_o});var K=(r,e,t)=>({getApprovalFlows:async({limit:g,cursor:c,ids:m,states:u,createdFrom:b,createdTo:x}={})=>{let w=await r.callAction({actionName:"approval/getApprovalFlows",query:{...g?{limit:g}:{},...c?{cursor:c}:{},...m?{flowIds:m}:{},...u?{flowStates:u}:{},...b?{createdFrom:b}:{},...x?{createdTo:x}:{},...e?{businessUnitKey:e}:{},...t?{storeKey:t}:{}}});if(!w.isError)return w.data;throw w.error},approveFlow:async g=>{let c=await r.callAction({actionName:"approval/approveFlow",query:{approvalFlowId:g,businessUnitKey:e,storeKey:t}});if(!c.isError)return c.data;throw c.error},rejectFlow:async(g,c)=>{let m=await r.callAction({actionName:"approval/rejectFlow",query:{approvalFlowId:g,businessUnitKey:e,storeKey:t},payload:{reason:c}});if(!m.isError)return m.data;throw m.error},getApprovalFlowByOrderId:async g=>{let c=await r.callAction({actionName:"approval/getApprovalFlowByOrderId",query:{businessUnitKey:e,storeKey:t,orderId:g}});if(!c.isError)return c.data;throw c.error},getApprovalFlowById:async g=>{let c=await r.callAction({actionName:"approval/getApprovalFlow",query:{businessUnitKey:e,storeKey:t,approvalFlowId:g}});if(!c.isError)return c.data;throw c.error},getApprovalRules:async({limit:g,cursor:c,ids:m,states:u,createdFrom:b,createdTo:x,predicate:w})=>{let k=await r.callAction({actionName:"approval/getApprovalRules",query:{...g?{limit:g}:{},...c?{cursor:c}:{},...m?{ruleIds:m}:{},...u?{ruleStates:u}:{},...w?{predicate:w}:{},...b?{createdFrom:b}:{},...x?{createdTo:x}:{},...e?{businessUnitKey:e}:{},...t?{storeKey:t}:{}}});if(!k.isError)return k.data;throw k.error},activateRule:async g=>{let c=await r.callAction({actionName:"approval/activateApprovalRule",query:{businessUnitKey:e,storeKey:t,approvalRuleId:g}});if(!c.isError)return c.data;throw c.error},deactivateRule:async g=>{let c=await r.callAction({actionName:"approval/deactivateApprovalRule",query:{businessUnitKey:e,storeKey:t,approvalRuleId:g}});if(!c.isError)return c.data;throw c.error},createRule:async g=>{let c=await r.callAction({actionName:"approval/createApprovalRule",query:{businessUnitKey:e,storeKey:t},payload:g});if(!c.isError)return c.data;throw c.error},duplicateRule:async(g,c)=>{let m=await r.callAction({actionName:"approval/duplicateApprovalRule",query:{businessUnitKey:e,storeKey:t,approvalRuleId:g},payload:{businessUnitKeys:c}});if(!m.isError)return m.data;throw m.error},updateRule:async(g,c)=>{let m=await r.callAction({actionName:"approval/updateApprovalRule",query:{businessUnitKey:e,storeKey:t,approvalRuleId:g},payload:c});if(!m.isError)return m.data;throw m.error}});var Wr=({openDelay:r,closeDelay:e,defaultIsOpen:t=!1}={})=>{let[n,o]=_react.useState.call(void 0, t),i=_react.useCallback.call(void 0, ()=>{r?setTimeout(()=>o(!0),r):o(!0)},[r]),s=_react.useCallback.call(void 0, ()=>{e?setTimeout(()=>o(!1),e):o(!1)},[e]),l=_react.useCallback.call(void 0, ()=>{n?s():i()},[i,s,n]);return{isOpen:n,onOpen:i,onClose:s,onToggle:l}},$e=Wr;var Kr=({flows:r,sortOptions:e,filters:t,onSortBy:n,onSearch:o,onClearRefinements:i,statusOptions:s,onStatusRefine:l,onCreationDateRefine:a,translate:d,components:p})=>{let{isOpen:y,onOpen:v,onClose:h}=$e(),{isOpen:g,onClose:c,onToggle:m}=$e(),u=[{title:"product.sortBy",Component:_react2.default.createElement("div",{className:"flex flex-col gap-7"},(_nullishCoalesce(e, () => ([]))).map(({name:b,value:x})=>_react2.default.createElement(p.Radio,{key:x,label:b,checked:x===_optionalChain([t, 'optionalAccess', _157 => _157.sort]),onSelected:()=>_optionalChain([n, 'optionalCall', _158 => _158(x)])})))},{title:"dashboard.quote.search",Component:_react2.default.createElement(p.SearchInput,{searchValue:_nullishCoalesce(_optionalChain([t, 'optionalAccess', _159 => _159.search]), () => ("")),variant:"sm",placeholder:`${_optionalChain([d, 'optionalCall', _160 => _160("dashboard.search.for.flows")])}...`,handleOnChange:b=>_optionalChain([o, 'optionalCall', _161 => _161(b)])})},{title:"dashboard.order.status",Component:_react2.default.createElement("div",{className:"flex flex-col gap-7"},(_nullishCoalesce(s, () => ([]))).map(({name:b,value:x})=>_react2.default.createElement(p.Checkbox,{key:x,label:b,checked:_optionalChain([t, 'optionalAccess', _162 => _162.status, 'optionalAccess', _163 => _163.includes, 'call', _164 => _164(x)]),onChecked:w=>_optionalChain([l, 'optionalCall', _165 => _165(w?x:"")])})))},{title:"dashboard.creation.date",Component:_react2.default.createElement("div",null,_react2.default.createElement("div",{onClick:m,className:"rounded-md border border-gray-300 px-3 py-2 text-14 text-gray-600"},_optionalChain([t, 'optionalAccess', _166 => _166.createdFrom])||_optionalChain([t, 'optionalAccess', _167 => _167.createdTo])?`${t.createdFrom?new Date(t.createdFrom).toLocaleDateString():""} : ${t.createdTo?new Date(t.createdTo).toLocaleDateString():""}`:"dd/mm/yy"),g&&_react2.default.createElement("div",null,_react2.default.createElement(p.DatePicker,{mode:"range",selected:{from:_optionalChain([t, 'optionalAccess', _168 => _168.createdFrom])?new Date(_optionalChain([t, 'optionalAccess', _169 => _169.createdFrom])):void 0,to:_optionalChain([t, 'optionalAccess', _170 => _170.createdTo])?new Date(_optionalChain([t, 'optionalAccess', _171 => _171.createdTo])):void 0},onSelect:b=>_optionalChain([a, 'optionalCall', _172 => _172({from:_optionalChain([b, 'optionalAccess', _173 => _173.from]),to:_optionalChain([b, 'optionalAccess', _174 => _174.to])})])}),_react2.default.createElement("div",{className:"mt-2 flex items-center justify-end gap-8 pr-8"},_react2.default.createElement("span",{className:"text-14 font-medium uppercase text-primary",onClick:c},_optionalChain([d, 'optionalCall', _175 => _175("common.cancel")])),_react2.default.createElement("span",{className:"text-14 font-medium uppercase text-primary",onClick:()=>{c()}},_optionalChain([d, 'optionalCall', _176 => _176("common.save")])))))}];return _react2.default.createElement("div",{className:"lg:hidden"},_react2.default.createElement("button",{className:"flex w-full cursor-pointer items-center justify-center gap-2 rounded-md border border-gray-300 p-2 text-14 text-gray-600 transition hover:bg-gray-50 md:w-fit md:grow-0",onClick:v},_react2.default.createElement("span",null,_optionalChain([d, 'optionalCall', _177 => _177("product.sortAndFilter")])),_react2.default.createElement(_outline.AdjustmentsHorizontalIcon,{width:20})),_react2.default.createElement(p.Drawer,{isOpen:y,onClose:h,direction:"left",headline:_optionalChain([d, 'optionalCall', _178 => _178("product.sortAndFilter")]),className:"h-[100vh] w-[90vw] max-w-[350px]",headerClassName:"border-y border-neutral-400"},_react2.default.createElement("div",{className:"flex h-full flex-col"},_react2.default.createElement("div",{className:"grow overflow-y-auto px-4 lg:px-5"},u.map(({title:b,Component:x},w)=>_react2.default.createElement("div",{key:w,className:"border-b border-neutral-400"},_react2.default.createElement(p.Accordion,{className:"border-none"},_react2.default.createElement(p.Accordion.Button,{className:"py-5",defaultSpacing:!1},_react2.default.createElement("span",{className:"text-14 font-bold"},_optionalChain([d, 'optionalCall', _179 => _179(b)]))),_react2.default.createElement(p.Accordion.Panel,{defaultSpacing:!1,className:"pb-6"},x))))),_react2.default.createElement("div",{className:"flex items-center gap-3 border-t border-neutral-400 p-4 lg:p-5"},_react2.default.createElement(p.Button,{variant:"secondary",className:"flex-1",onClick:()=>{_optionalChain([i, 'optionalCall', _180 => _180()]),h()}},_optionalChain([d, 'optionalCall', _181 => _181("product.clear.all")])),_react2.default.createElement(p.Button,{variant:"primary",className:"flex-1",onClick:h},_optionalChain([d, 'optionalCall', _182 => _182("common.view")])," (",_optionalChain([r, 'optionalAccess', _183 => _183.length]),")")))))},at=Kr;var _r=({filters:r,onSearch:e,statusOptions:t,onStatusRefine:n,onCreationDateRefine:o,translate:i,components:s})=>{let l=[{title:"dashboard.flows.label",Component:_react2.default.createElement(s.SearchInput,{className:"h-[38px] w-[360px]",searchValue:_nullishCoalesce(_optionalChain([r, 'optionalAccess', _184 => _184.search]), () => ("")),variant:"xs",placeholder:`${_optionalChain([i, 'optionalCall', _185 => _185("dashboard.search.for.flows")])}...`,handleOnChange:a=>_optionalChain([e, 'optionalCall', _186 => _186(a)])})},{title:"common.status",Component:_react2.default.createElement(s.RefinementDropdown,{size:"lg",className:"w-[200px]",options:(_nullishCoalesce(t, () => ([]))).map(({name:a,value:d,count:p})=>({name:a,value:d,count:p,selected:!!_optionalChain([r, 'optionalAccess', _187 => _187.status, 'optionalAccess', _188 => _188.includes, 'call', _189 => _189(d)]),onSelected:()=>_optionalChain([n, 'optionalCall', _190 => _190(d)])}))},_optionalChain([i, 'optionalCall', _191 => _191("common.select")]))},{title:"dashboard.creation.date",Component:_react2.default.createElement(s.Dropdown,{size:"lg",className:"w-[200px]"},_react2.default.createElement(s.Dropdown.Button,null,_optionalChain([i, 'optionalCall', _192 => _192("common.select")])),_react2.default.createElement(s.Dropdown.Options,{className:"max-h-[unset] w-max"},_react2.default.createElement(s.DatePicker,{mode:"range",selected:{from:_optionalChain([r, 'optionalAccess', _193 => _193.createdFrom])?new Date(_optionalChain([r, 'optionalAccess', _194 => _194.createdFrom])):void 0,to:_optionalChain([r, 'optionalAccess', _195 => _195.createdTo])?new Date(_optionalChain([r, 'optionalAccess', _196 => _196.createdTo])):void 0},onSelect:a=>_optionalChain([o, 'optionalCall', _197 => _197({from:_optionalChain([a, 'optionalAccess', _198 => _198.from]),to:_optionalChain([a, 'optionalAccess', _199 => _199.to])})])})))}];return _react2.default.createElement("div",{className:"hidden gap-3 lg:flex"},l.map(({title:a,Component:d},p)=>_react2.default.createElement("div",{key:p},_react2.default.createElement("h5",{className:"text-14 text-gray-700"},_optionalChain([i, 'optionalCall', _200 => _200(a)])),_react2.default.createElement("div",{className:"mt-2"},d))))},it=_r;var _solid = require('@heroicons/react/24/solid');var Gr=({filters:r,onClearRefinements:e,onStatusRefine:t,onCreationDateRefine:n,translate:o})=>{let i=_react.useMemo.call(void 0, ()=>{let s=[];return r&&(_optionalChain([r, 'access', _201 => _201.status, 'optionalAccess', _202 => _202.length])&&s.push(...r.status.map(l=>({name:_optionalChain([o, 'optionalCall', _203 => _203(`dashbaord.flows.status.${l.toLowerCase()}`)])||l,onRefine:()=>_optionalChain([t, 'optionalCall', _204 => _204(l)])}))),(r.createdFrom||r.createdTo)&&s.push({name:`${r.createdFrom?new Date(r.createdFrom).toLocaleDateString():""} : ${r.createdTo?new Date(r.createdTo).toLocaleDateString():""}`,onRefine:()=>_optionalChain([n, 'optionalCall', _205 => _205({from:void 0,to:void 0})])})),s},[r,t,n,o]);return!_optionalChain([r, 'optionalAccess', _206 => _206.status, 'optionalAccess', _207 => _207.length])&&!_optionalChain([r, 'optionalAccess', _208 => _208.createdFrom])&&!_optionalChain([r, 'optionalAccess', _209 => _209.createdTo])?_react2.default.createElement(_react2.default.Fragment,null):_react2.default.createElement("div",{className:"mt-5 lg:mt-8"},_react2.default.createElement("div",{className:"flex flex-wrap gap-3"},_react2.default.createElement("div",{className:"cursor-pointer rounded-md border border-gray-300 px-2 py-[6px] text-14 leading-[20px] text-gray-700",onClick:e},_optionalChain([o, 'optionalCall', _210 => _210("dashboard.clear.all")])),i.map(({name:s,onRefine:l})=>_react2.default.createElement("div",{key:s,className:"flex items-center gap-2 rounded-md border border-neutral-200 bg-neutral-200 px-2 py-[6px] text-14 leading-[20px] text-gray-700"},_react2.default.createElement("span",null,s),_react2.default.createElement(_solid.XMarkIcon,{className:"cursor-pointer text-gray-700",width:16,height:16,onClick:l})))))},lt=Gr;var Yr=({status:r,translate:e,components:t})=>{let n={Pending:"warning",Approved:"primary",Rejected:"danger"};return _react2.default.createElement(t.Tag,{className:"capitalize",variant:n[r]},_optionalChain([e, 'optionalCall', _211 => _211(`dashboard.flows.status.${r.toLowerCase()}`)]))},ve=Yr;var Zr=({flows:r,totalItems:e=0,page:t=1,onPageChange:n,onRowsPerPageChange:o,translate:i,components:s,limit:l=25})=>{let a=_optionalChain([s, 'optionalAccess', _212 => _212.Table]);return _react2.default.createElement(a,{className:"mt-8"},_react2.default.createElement(a.Container,{className:"table-fixed rounded-md"},_react2.default.createElement(a.Head,{className:"border-b text-12 font-bold"},_react2.default.createElement(a.Cell,null,_optionalChain([i, 'optionalCall', _213 => _213("common.status")])),_react2.default.createElement(a.Cell,null,_optionalChain([i, 'optionalCall', _214 => _214("common.id")])),_react2.default.createElement(a.Cell,null,_optionalChain([i, 'optionalCall', _215 => _215("common.date")])),_react2.default.createElement(a.Cell,null,_optionalChain([i, 'optionalCall', _216 => _216("common.order.number")])),_react2.default.createElement(a.Cell,{isButtonsHead:!0})),_react2.default.createElement(a.Body,null,(_nullishCoalesce(r, () => ([]))).map(({id:d,status:p,order:y,createdAt:v})=>_react2.default.createElement(a.Row,{key:d},_react2.default.createElement(a.Cell,null,_react2.default.createElement("div",{className:"flex items-center justify-between gap-2"},_react2.default.createElement(ve,{status:p,components:s,translate:i}))),_react2.default.createElement(a.Cell,null,_react2.default.createElement("span",{className:"block max-w-full truncate"},d)),_react2.default.createElement(a.Cell,null,new Date(v).toLocaleDateString()),_react2.default.createElement(a.Cell,null,y.orderNumber),_react2.default.createElement(a.Cell,{isButtonsCell:!0},_react2.default.createElement("div",{className:"flex justify-end"},_react2.default.createElement(s.Link,{href:`/approval-flow/${d.replace(/\s+/g,"-")}`,underlineOnHover:!1},_react2.default.createElement(s.Button,{variant:"secondary"},_optionalChain([i, 'optionalCall', _217 => _217("common.view")]))))))))),_react2.default.createElement(a.Pagination,{page:t,limit:l,totalItems:e,onNext:()=>_optionalChain([n, 'optionalCall', _218 => _218(t+1)]),onPrevious:()=>_optionalChain([n, 'optionalCall', _219 => _219(t-1)]),onRowsPerPageChange:o}))},dt=Zr;var Rr=({translate:r,components:e,flows:t,onClearRefinements:n,onStatusRefine:o,onCreationDateRefine:i,onSearch:s,sortOptions:l,onSortBy:a,filters:d,statusOptions:p,totalItems:y,page:v,onPageChange:h,onRowsPerPageChange:g,limit:c})=>{let m={flows:t,onClearRefinements:n,onSearch:s,onStatusRefine:o,onCreationDateRefine:i,sortOptions:l,onSortBy:a,filters:d,statusOptions:p,translate:r,components:e},u={translate:r,onClearRefinements:n,filters:d,onSearch:s,onStatusRefine:o,onCreationDateRefine:i},b={flows:t,totalItems:y,page:v,limit:c,components:e,onPageChange:h,onRowsPerPageChange:g,translate:r};return _react2.default.createElement("div",{className:"w-full"},_react2.default.createElement(at,{...m}),_react2.default.createElement(it,{...m}),_react2.default.createElement(lt,{...u}),_react2.default.createElement(dt,{...b}))},pt=Rr;function ct(r,e){let[t,n]=_react.useState.call(void 0, r);return _react.useEffect.call(void 0, ()=>{let o=setTimeout(()=>n(r),e||500);return()=>{clearTimeout(o)}},[r,e]),t}var oo=()=>{let[r,e]=_react.useState.call(void 0, 25),[t,n]=_react.useState.call(void 0, "offset:0"),[o,i]=_react.useState.call(void 0, []),[s,l]=_react.useState.call(void 0, ""),[a,d]=_react.useState.call(void 0, {from:void 0,to:void 0}),p=ct(s),y=Math.floor(+t.split(":")[1]/r)+1,v=_react.useCallback.call(void 0, u=>i([...o,u]),[o]),h=_react.useCallback.call(void 0, u=>i(o.filter(b=>b!==u)),[o]),g=_react.useCallback.call(void 0, u=>{let[b,x,w]=[u.getDate().toString().padStart(2,"0"),(u.getMonth()+1).toString().padStart(2,"0"),u.getFullYear()];return`${w}-${x}-${b}`},[]),c=_react.useMemo.call(void 0, ()=>{let u={};return a.from&&(u.from=`${g(a.from)}T00:00:00.000Z`),a.to&&(u.to=`${g(a.to)}T23:59:59.999Z`),u},[a,g]),m=_react.useCallback.call(void 0, ()=>{e(25),i([]),l(""),d({from:void 0,to:void 0})},[]);return{limit:r,page:y,setLimit:e,cursor:t,setCursor:n,states:o,addState:v,removeState:h,setStates:i,search:s,debouncedSearch:p,setSearch:l,date:a,ISODate:c,onCreationDateRefine:d,clearRefinements:m}},Ce=oo;var no=r=>({flowStatusOptions:(n=>n.map(({name:o,value:i})=>({name:r(`dashboard.flows.status.${o.toLowerCase()}`),value:i})))([{name:"Pending",value:"Pending"},{name:"Approved",value:"Approved"},{name:"Rejected",value:"Rejected"}])}),mt=no;var lo=({businessUnitKey:r,storeKey:e,sdk:t,components:n,translate:o})=>{let{getApprovalFlows:i}=K(t,r,e),{page:s,limit:l,setLimit:a,cursor:d,setCursor:p,clearRefinements:y,states:v,addState:h,removeState:g,search:c,debouncedSearch:m,setSearch:u,date:b,ISODate:x,onCreationDateRefine:w}=Ce(),[k,O]=_react.useState.call(void 0, []),{flowStatusOptions:E}=mt(o),C=k.previousCursor,N=k.nextCursor,F=_nullishCoalesce(k.total, () => (0));return _react.useEffect.call(void 0, ()=>{r&&(async()=>{let I=await i({limit:l,cursor:d,...v.length?{states:v}:{},...m?{ids:[m.trim()]}:{},createdFrom:x.from,createdTo:x.to});O(I)})()},[r,l,d,v,m,x.from,x.to]),r?_react2.default.createElement(pt,{translate:o,components:n,flows:k.items||[],filters:{search:c,status:v,createdFrom:_optionalChain([b, 'access', _220 => _220.from, 'optionalAccess', _221 => _221.toString, 'call', _222 => _222()]),createdTo:_optionalChain([b, 'access', _223 => _223.to, 'optionalAccess', _224 => _224.toString, 'call', _225 => _225()])},sortOptions:[],statusOptions:E,onSearch:I=>u(I),onStatusRefine:I=>{v.includes(I)?g(I):h(I)},onClearRefinements:y,onCreationDateRefine:w,page:s,totalItems:F,limit:l,onPageChange:I=>{let A=I>s;A&&N?p(N):!A&&C&&p(C)},onRowsPerPageChange:I=>a(+I)}):null},ut=lo;var po=({filters:r,onSearch:e,statusOptions:t,onStatusRefine:n,onCreationDateRefine:o,translate:i,components:s,children:l})=>{let a=[{title:"dashboard.rules.search.label",Component:_react2.default.createElement(s.SearchInput,{className:"h-[38px] w-[360px]",searchValue:_nullishCoalesce(_optionalChain([r, 'optionalAccess', _226 => _226.search]), () => ("")),variant:"xs",placeholder:`${_optionalChain([i, 'optionalCall', _227 => _227("dashboard.search.for.rules")])}...`,handleOnChange:d=>_optionalChain([e, 'optionalCall', _228 => _228(d)])})},{title:"common.status",Component:_react2.default.createElement(s.RefinementDropdown,{size:"lg",className:"w-[200px]",options:(_nullishCoalesce(t, () => ([]))).map(({name:d,value:p,count:y})=>({name:d,value:p,count:y,selected:!!_optionalChain([r, 'optionalAccess', _229 => _229.status, 'optionalAccess', _230 => _230.includes, 'call', _231 => _231(p)]),onSelected:()=>_optionalChain([n, 'optionalCall', _232 => _232(p)])}))},_optionalChain([i, 'optionalCall', _233 => _233("common.select")]))},{title:"dashboard.creation.date",Component:_react2.default.createElement(s.Dropdown,{size:"lg",className:"w-[200px]"},_react2.default.createElement(s.Dropdown.Button,null,_optionalChain([i, 'optionalCall', _234 => _234("common.select")])),_react2.default.createElement(s.Dropdown.Options,{className:"max-h-[unset] w-max"},_react2.default.createElement(s.DatePicker,{mode:"range",selected:{from:_optionalChain([r, 'optionalAccess', _235 => _235.createdFrom])?new Date(_optionalChain([r, 'optionalAccess', _236 => _236.createdFrom])):void 0,to:_optionalChain([r, 'optionalAccess', _237 => _237.createdTo])?new Date(_optionalChain([r, 'optionalAccess', _238 => _238.createdTo])):void 0},onSelect:d=>_optionalChain([o, 'optionalCall', _239 => _239({from:_optionalChain([d, 'optionalAccess', _240 => _240.from]),to:_optionalChain([d, 'optionalAccess', _241 => _241.to])})])})))}];return _react2.default.createElement("div",{className:"hidden items-end justify-between lg:flex"},_react2.default.createElement("div",{className:"hidden gap-3 lg:flex"},a.map(({title:d,Component:p},y)=>_react2.default.createElement("div",{key:y},_react2.default.createElement("h5",{className:"text-14 text-gray-700"},_optionalChain([i, 'optionalCall', _242 => _242(d)])),_react2.default.createElement("div",{className:"mt-2"},p)))),l)},ft=po;var uo=({filters:r,onClearRefinements:e,onStatusRefine:t,onCreationDateRefine:n,translate:o})=>{let i=_react.useMemo.call(void 0, ()=>{let s=[];return r&&(_optionalChain([r, 'access', _243 => _243.status, 'optionalAccess', _244 => _244.length])&&s.push(...r.status.map(l=>({name:_optionalChain([o, 'optionalCall', _245 => _245(`dashboard.rules.status.${l.toLowerCase()}`)])||l,onRefine:()=>_optionalChain([t, 'optionalCall', _246 => _246(l)])}))),(r.createdFrom||r.createdTo)&&s.push({name:`${r.createdFrom?new Date(r.createdFrom).toLocaleDateString():""} : ${r.createdTo?new Date(r.createdTo).toLocaleDateString():""}`,onRefine:()=>_optionalChain([n, 'optionalCall', _247 => _247({from:void 0,to:void 0})])})),s},[r,t,n,o]);return!_optionalChain([r, 'optionalAccess', _248 => _248.status, 'optionalAccess', _249 => _249.length])&&!_optionalChain([r, 'optionalAccess', _250 => _250.createdFrom])&&!_optionalChain([r, 'optionalAccess', _251 => _251.createdTo])?_react2.default.createElement(_react2.default.Fragment,null):_react2.default.createElement("div",{className:"mt-5 lg:mt-8"},_react2.default.createElement("div",{className:"flex flex-wrap gap-3"},_react2.default.createElement("div",{className:"cursor-pointer rounded-md border border-gray-300 px-2 py-[6px] text-14 leading-[20px] text-gray-700",onClick:e},_optionalChain([o, 'optionalCall', _252 => _252("dashboard.clear.all")])),i.map(({name:s,onRefine:l})=>_react2.default.createElement("div",{key:s,className:"flex items-center gap-2 rounded-md border border-neutral-200 bg-neutral-200 px-2 py-[6px] text-14 leading-[20px] text-gray-700"},_react2.default.createElement("span",null,s),_react2.default.createElement(_solid.XMarkIcon,{className:"cursor-pointer text-gray-700",width:16,height:16,onClick:l})))))},gt=uo;var go=({status:r,translate:e,components:t})=>{let n={Inactive:"warning",Active:"primary"};return _react2.default.createElement(t.Tag,{className:"capitalize",variant:n[r]},_optionalChain([e, 'optionalCall', _253 => _253(`dashboard.rules.status.${r.toLowerCase()}`)]))},yt=go;var yo=({rules:r,totalItems:e=0,page:t=1,onPageChange:n,onRowsPerPageChange:o,translate:i,components:s,limit:l=25})=>{let a=_optionalChain([s, 'optionalAccess', _254 => _254.Table]);return _react2.default.createElement(a,{className:"mt-8"},_react2.default.createElement(a.Container,{className:"table-fixed rounded-md"},_react2.default.createElement(a.Head,{className:"border-b text-12 font-bold"},_react2.default.createElement(a.Cell,null,_optionalChain([i, 'optionalCall', _255 => _255("common.status")])),_react2.default.createElement(a.Cell,null,_optionalChain([i, 'optionalCall', _256 => _256("common.name")])),_react2.default.createElement(a.Cell,null,_optionalChain([i, 'optionalCall', _257 => _257("common.description")])),_react2.default.createElement(a.Cell,null,_optionalChain([i, 'optionalCall', _258 => _258("common.id")])),_react2.default.createElement(a.Cell,null,_optionalChain([i, 'optionalCall', _259 => _259("dashboard.rules.createdAt")])),_react2.default.createElement(a.Cell,null,_optionalChain([i, 'optionalCall', _260 => _260("dashboard.rules.predicate")])),_react2.default.createElement(a.Cell,{isButtonsHead:!0})),_react2.default.createElement(a.Body,null,(_nullishCoalesce(r, () => ([]))).map(({name:d,description:p,id:y,status:v,createdAt:h,predicate:g})=>_react2.default.createElement(a.Row,{key:y},_react2.default.createElement(a.Cell,null,_react2.default.createElement("div",{className:"flex items-center justify-between gap-2"},_react2.default.createElement("span",{className:"block max-w-full truncate"},_react2.default.createElement(yt,{status:v,translate:i,components:s})))),_react2.default.createElement(a.Cell,null,_react2.default.createElement("span",{className:"block max-w-full"},d)),_react2.default.createElement(a.Cell,null,_react2.default.createElement("span",{className:"block max-w-full truncate"},p)),_react2.default.createElement(a.Cell,null,_react2.default.createElement("span",{className:"block max-w-full truncate"},y)),_react2.default.createElement(a.Cell,null,new Date(h).toLocaleDateString()),_react2.default.createElement(a.Cell,null,_react2.default.createElement("span",{className:"block max-w-full truncate"},g)),_react2.default.createElement(a.Cell,{isButtonsCell:!0},_react2.default.createElement("div",{className:"flex justify-end"},_react2.default.createElement(s.Link,{href:`/approval-rule/${y.replace(/\s+/g,"-")}`,underlineOnHover:!1},_react2.default.createElement(s.Button,{variant:"secondary"},_optionalChain([i, 'optionalCall', _261 => _261("common.view")]))))))))),_react2.default.createElement(a.Pagination,{page:t,limit:l,totalItems:e,onNext:()=>_optionalChain([n, 'optionalCall', _262 => _262(t+1)]),onPrevious:()=>_optionalChain([n, 'optionalCall', _263 => _263(t-1)]),onRowsPerPageChange:o}))},bt=yo;var vo=({translate:r,permissions:e,components:t,rules:n,onClearRefinements:o,onStatusRefine:i,onCreationDateRefine:s,onSearch:l,sortOptions:a,onSortBy:d,filters:p,statusOptions:y,totalItems:v,page:h,onPageChange:g,onRowsPerPageChange:c,limit:m})=>{let u={rules:n,onClearRefinements:o,onSearch:l,onStatusRefine:i,onCreationDateRefine:s,sortOptions:a,onSortBy:d,filters:p,statusOptions:y,translate:r,components:t},b={translate:r,onClearRefinements:o,filters:p,onSearch:l,onStatusRefine:i,onCreationDateRefine:s},x={rules:n,totalItems:v,page:h,limit:m,components:t,onPageChange:g,onRowsPerPageChange:c,translate:r},w=_react.useMemo.call(void 0, ()=>!_optionalChain([e, 'optionalAccess', _264 => _264.UpdateApprovalRules]),[e]);return _react2.default.createElement("div",{className:"w-full"},_react2.default.createElement(ft,{...u},_react2.default.createElement(t.Link,{href:w?"":"/create-approval-rule",className:"block w-full md:w-fit",underlineOnHover:!1},_react2.default.createElement(t.Button,{size:"m",className:"w-full px-6",disabled:w},r("dashboard.new.rule")))),_react2.default.createElement(gt,{...b}),_react2.default.createElement(bt,{...x}))},vt=vo;var wo=({businessUnitKey:r,storeKey:e,sdk:t,components:n,permissions:o,translate:i})=>{let{getApprovalRules:s}=K(t,r,e),{page:l,limit:a,setLimit:d,cursor:p,setCursor:y,clearRefinements:v,states:h,addState:g,removeState:c,search:m,debouncedSearch:u,setSearch:b,date:x,ISODate:w,onCreationDateRefine:k}=Ce(),[O,E]=_react.useState.call(void 0, []),C=[{name:i("dashboard.rules.status.active"),value:"Active"},{name:i("dashboard.rules.status.inactive"),value:"Inactive"}],N=O.previousCursor,F=O.nextCursor,I=_nullishCoalesce(O.total, () => (0));return _react.useEffect.call(void 0, ()=>{r&&(async()=>{let A=await s({limit:a,cursor:p,...h.length?{states:h}:{},...u?{predicate:u.trim()}:{},createdFrom:w.from,createdTo:w.to});E(A)})()},[r,a,p,h,u,w.from,w.to]),r?_react2.default.createElement(vt,{translate:i,components:n,permissions:o,rules:O.items||[],filters:{search:m,status:h,createdFrom:_optionalChain([x, 'access', _265 => _265.from, 'optionalAccess', _266 => _266.toString, 'call', _267 => _267()]),createdTo:_optionalChain([x, 'access', _268 => _268.to, 'optionalAccess', _269 => _269.toString, 'call', _270 => _270()])},sortOptions:[],statusOptions:C,onSearch:A=>b(A),onStatusRefine:A=>{h.includes(A)?c(A):g(A)},onClearRefinements:v,onCreationDateRefine:k,page:l,totalItems:I,limit:a,onPageChange:A=>{let B=A>l;B&&F?y(F):!B&&N&&y(N)},onRowsPerPageChange:A=>d(+A)}):null},xt=wo;var _dynamic = require('next/dynamic'); var _dynamic2 = _interopRequireDefault(_dynamic);var So=_dynamic2.default.call(void 0, ()=>Promise.resolve().then(() => _interopRequireWildcard(require("./approvers-preview-KGTMSUOE.cjs"))),{ssr:!1}),Oe=r=>{let e=r instanceof Date?r:new Date(r),[t,n,o]=[e.getDate().toString().padStart(2,"0"),(e.getMonth()+1).toString().padStart(2,"0"),e.getFullYear().toString()];return`${t}-${n}-${o}`},Po=({sdk:r,activeBusinessUnit:e,storeKey:t,flow:n,translate:o,calculateTransaction:i,components:s,accountId:l,permissions:a})=>{let{approveFlow:d,rejectFlow:p}=K(r,e.key,t),[y,v]=_react.useState.call(void 0, !1),[h,g]=_react.useState.call(void 0, ""),[c,m]=_react.useState.call(void 0, []),[u,b]=_react.useState.call(void 0, []),[x,w]=_react.useState.call(void 0, []),[k,O]=_react.useState.call(void 0, {approve:!1,reject:!1}),{locale:E}=_navigation.useParams.call(void 0, ),C=_react.useMemo.call(void 0, ()=>!_optionalChain([a, 'optionalAccess', _271 => _271.UpdateApprovalFlows]),[a]),N=async()=>{O({...k,approve:!0}),await d(n.id),O({...k,approve:!1})},F=async()=>{O({...k,reject:!0}),await p(n.id,h),g(""),O({...k,reject:!1})},I=_react.useMemo.call(void 0, ()=>c.some(B=>x.includes(B)),[c,x]),A=_react.useMemo.call(void 0, ()=>{let{total:B,shipping:V,subtotal:W,tax:R,discount:re}=i(n.order);return{currency:_nullishCoalesce(_optionalChain([n, 'access', _272 => _272.order, 'optionalAccess', _273 => _273.sum, 'optionalAccess', _274 => _274.currencyCode]), () => ("USD")),subtotal:W.centAmount*100,...W.centAmount>0?{taxCosts:R.centAmount*100}:{},...V.centAmount>0?{shippingCosts:V.centAmount*100}:{},...re.centAmount>0?{discount:re.centAmount*100}:{},total:B.centAmount*100}},[n.order]);return _react.useEffect.call(void 0, ()=>{if(e&&l){let B=e.associates.find(V=>V.accountId===l);B&&w(_optionalChain([B, 'access', _275 => _275.roles, 'optionalAccess', _276 => _276.map, 'call', _277 => _277(V=>V.key||"")])||[])}},[e,l]),_react.useEffect.call(void 0, ()=>{n&&(m(_optionalChain([n, 'access', _278 => _278.approvals, 'optionalAccess', _279 => _279.length])?n.approvals.reduce((B,V)=>B.concat(V.approver.associateRoleAssignments.map(W=>W.associateRole.key)),[]):[]),b(n.rejection?n.rejection.rejecter.associateRoleAssignments.map(B=>B.associateRole.key):[]))},[n]),n?_react2.default.createElement("div",{className:""},C&&_react2.default.createElement(s.InfoBanner,{className:"mt-3"},_react2.default.createElement("b",null,o("common.view.only"))," ",o("dashboard.flow.details.view.only.desc")),_react2.default.createElement("div",{className:"flex items-center justify-between"},_react2.default.createElement("h1",{className:"py-6 text-18 font-extrabold text-gray-800 md:py-7 md:text-20 lg:py-9 lg:text-24"},o("dashboard.flow.details")),_react2.default.createElement("div",{className:"flex items-center justify-normal gap-x-3"},_react2.default.createElement(s.PreviousPageLink,null),!y&&_react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement(s.Button,{size:"s",variant:"secondary",disabled:I||n.status!=="Pending",onClick:()=>v(!0),loading:k.reject},o("dashboard.flow.details.reject")),_react2.default.createElement(s.Button,{size:"s",variant:"primary",disabled:I||n.status!=="Pending",onClick:N,loading:k.approve},o("dashboard.flow.details.approve"))),y&&_react2.default.createElement("div",{className:"flex w-full flex-col gap-2 md:w-[280px]"},_react2.default.createElement(s.Input,{name:"reason",className:"md:w-[180px]",label:o("flow.reject.reason"),required:!0,value:h,onChange:B=>g(B.target.value)}),_react2.default.createElement(s.Button,{size:"s",variant:"warning",disabled:I||n.status!=="Pending",onClick:F,loading:k.reject},o("dashboard.flow.details.reject"))))),_react2.default.createElement("h3",{className:"text-14 text-gray-600"},o("dashboard.flow.details.id"),": ",n.id),n.createdAt&&_react2.default.createElement("h3",{className:"mt-4 text-14 text-gray-600"},o("dashboard.flow.details.date"),": ",Oe(n.createdAt)),_react2.default.createElement("h3",{className:"mt-4 text-14 text-gray-600"},o("dashboard.flow.details.business_unit"),": ",n.businessUnit.key),_react2.default.createElement("h2",{className:"pt-6 text-16 font-extrabold text-gray-800 md:pt-7 md:text-18 lg:pt-9 lg:text-20"},o("dashboard.flow.details.status.title")),I&&_react2.default.createElement("h3",{className:"flex items-center gap-2 text-14 text-gray-600"},o("dashboard.flow.details.account.already.approved")),_react2.default.createElement("h3",{className:"mt-4 flex items-center gap-2 text-14 text-gray-600"},o("dashboard.flow.details.status"),":"," ",_react2.default.createElement(ve,{status:n.status,components:s,translate:o})),!!n.rejection&&_react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement("h3",{className:"mt-4 text-14 text-gray-600"},o("dashboard.flow.details.rejection.date"),": ",Oe(n.rejection.rejectedAt)),!!n.rejection.reason&&_react2.default.createElement("h3",{className:"mt-4 text-14 text-gray-600"},o("dashboard.flow.details.rejection.reason"),": ",n.rejection.reason)),!!_optionalChain([n, 'access', _280 => _280.approvals, 'optionalAccess', _281 => _281.length])&&n.approvals.map((B,V)=>_react2.default.createElement("h3",{className:"mt-4 text-14 text-gray-600",key:`approval-${V}`},o("dashboard.flow.details.approval.date"),": ",Oe(B.approvedAt)," ",o("dashboard.flow.details.approval.by.role"),":"," ",B.approver.associateRoleAssignments.map(W=>W.associateRole.key).join(", "))),!!n.rules.length&&n.rules.map((B,V)=>_react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement("h2",{key:`rule-${V}`,className:"pt-6 text-16 font-extrabold text-gray-800 md:pt-7 md:text-18 lg:pt-9 lg:text-20"},o("dashboard.flow.details.rule.title"),": ",B.name),_react2.default.createElement("h3",{className:"mt-4 text-14 text-gray-600",key:`rule-desc-${V}`},o("dashboard.flow.details.rule.description"),": ",B.description),_react2.default.createElement("h3",{className:"my-4 text-14 text-gray-600",key:`rule-predicate-${V}`},o("dashboard.flow.details.rule.predicate"),": ",B.predicate),_react2.default.createElement(So,{key:`rule-preview-${V}`,components:s,translate:o,isPreview:!0,tiers:B.approvers.tiers,previewApprovedRoles:c,previewRejecteddRoles:u}))),!!_optionalChain([n, 'access', _282 => _282.order, 'optionalAccess', _283 => _283.lineItems, 'optionalAccess', _284 => _284.length])&&_react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement("h2",{className:"pt-6 text-16 font-extrabold text-gray-800 md:pt-7 md:text-18 lg:pt-9 lg:text-20"},o("dashboard.flow.details.order.details")),_react2.default.createElement("table",{className:"w-full"},_react2.default.createElement("thead",null,_react2.default.createElement("tr",{className:"border-b border-neutral-400 p-4 text-12 font-semibold uppercase text-gray-500"},_react2.default.createElement("th",{className:"p-4 text-left"},o("common.product")),_react2.default.createElement("th",{className:"hidden p-4 text-left md:table-cell"},o("common.sku")),_react2.default.createElement("th",{className:"hidden p-4 text-right md:table-cell"},o("common.qty")),_react2.default.createElement("th",{className:"hidden p-4 text-right lg:table-cell"},o("common.price")))),_react2.default.createElement("tbody",null,n.order.lineItems.map(({lineItemId:B,variant:V,name:W,count:R,price:re})=>_react2.default.createElement("tr",{key:B,className:"border-b border-neutral-400 p-4 text-14 text-gray-600"},_react2.default.createElement("td",{className:"p-4 text-left"},_react2.default.createElement("div",{className:"flex items-center gap-3"},_react2.default.createElement("span",{className:"relative block h-[40px] w-[40px]"},_react2.default.createElement("img",{src:_optionalChain([V, 'optionalAccess', _285 => _285.images, 'optionalAccess', _286 => _286[0]]),alt:_nullishCoalesce(W, () => (""))})),_react2.default.createElement("span",null,W))),_react2.default.createElement("td",{className:"hidden p-4 text-left md:table-cell"},_optionalChain([V, 'optionalAccess', _287 => _287.sku])),_react2.default.createElement("td",{className:"hidden p-4 text-right md:table-cell"},R),_react2.default.createElement("td",{className:"hidden p-4 text-right lg:table-cell"},M.formatForCurrency(_nullishCoalesce(re, () => (0)))))))),_react2.default.createElement("div",{className:"flex justify-end border-neutral-400 pb-7 pt-6"},_react2.default.createElement("div",{className:"flex w-full flex-col gap-2 md:px-4 lg:w-[420px] lg:pl-0"},_react2.default.createElement("div",{className:"flex items-center justify-between text-14 text-gray-600"},_react2.default.createElement("span",null,o("common.subtotal")),_react2.default.createElement("span",null,M.formatForCurrency(A.subtotal,E,A.currency))),A.shippingCosts&&A.shippingCosts>0&&_react2.default.createElement("div",{className:"flex items-center justify-between text-14 text-gray-600"},_react2.default.createElement("span",null,o("common.shipping")),_react2.default.createElement("span",null,M.formatForCurrency(A.shippingCosts,E,A.currency))),A.taxCosts&&A.taxCosts>0&&_react2.default.createElement("div",{className:"flex items-center justify-between text-14 text-gray-600"},_react2.default.createElement("span",null,o("common.tax")),_react2.default.createElement("span",null,M.formatForCurrency(A.taxCosts,E,A.currency))),A.discount&&A.discount>0&&_react2.default.createElement("div",{className:"flex items-center justify-between text-14 text-gray-600"},_react2.default.createElement("span",null,o("common.discount")),_react2.default.createElement("span",null,"-",M.formatForCurrency(A.discount,E,A.currency))),_react2.default.createElement("div",{className:"flex items-center justify-between font-medium text-gray-700"},_react2.default.createElement("span",null,o("common.total"),":"),_react2.default.createElement("span",null,M.formatForCurrency(A.total,E,A.currency))))))):null},ht=Po;var Do=({tiers:r,onUpdate:e,onPreview:t,associateRoles:n,translate:o,components:i})=>{let[s,l]=_react.useState.call(void 0, r),a=()=>{let c=[...s,{id:new Date().getTime(),and:[]}];l(c)},d=c=>{let m=s.filter(u=>u.id!==c);l(m)},p=c=>{let m=s.map(u=>u.id===c?{id:c,and:[...u.and,{id:new Date().getTime(),or:[]}]}:u);l(m)},y=(c,m)=>{let u=s.map(b=>b.id===c?{id:c,and:b.and.filter(x=>x.id!==m)}:b);l(u)},v=(c,m)=>{let u=s.map(b=>b.id===c?{id:c,and:b.and.map(x=>x.id===m?{id:m,or:[...x.or,{id:new Date().getTime(),associateRole:{typeId:"associate-role",key:_optionalChain([n, 'optionalAccess', _288 => _288[0], 'access', _289 => _289.value])}}]}:x)}:b);l(u)},h=(c,m,u)=>{let b=s.map(x=>x.id===c?{id:c,and:x.and.map(w=>w.id===m?{id:m,or:w.or.filter(k=>k.id!==u)}:w)}:x);l(b)},g=(c,m,u,b)=>{let x=s.map(w=>w.id===c?{id:c,and:w.and.map(k=>k.id===m?{id:m,or:k.or.map(O=>O.id===u?{...O,associateRole:{...O.associateRole,key:b}}:O)}:k)}:w);l(x)};return _react.useEffect.call(void 0, ()=>{s&&e(s)},[s]),_optionalChain([n, 'optionalAccess', _290 => _290.length])?_react2.default.createElement("div",{className:"border-primary-400 flex w-full flex-col items-end border p-2"},_react2.default.createElement("div",{className:"flex w-full flex-row-reverse justify-between"},_react2.default.createElement(i.Button,{type:"button",variant:"primary",size:"s",onClick:a,"data-cy":"approvers-add-tier"},_react2.default.createElement("span",{className:"text-xs"},o("dashboard.rule.details.add.tier")))),!!s.length&&_react2.default.createElement("div",{className:"mt-2 flex w-full flex-col"},s.map((c,m)=>_react2.default.createElement("div",{className:"border-primary-300 mt-2 flex w-full flex-col border p-2",key:c.id},_react2.default.createElement("div",{className:"flex w-full flex-row justify-between"},_react2.default.createElement("div",{className:"py-1/2 px-1 "},_react2.default.createElement("span",null,`Tier ${m+1}`)),_react2.default.createElement("div",{className:"flex gap-x-1"},_react2.default.createElement(i.Button,{type:"button",variant:"warning",size:"s",onClick:()=>d(c.id)},_react2.default.createElement("span",{className:"whitespace-nowrap text-xs"},o("dashboard.rule.details.remove.tier"))),_react2.default.createElement(i.Button,{type:"button",variant:"secondary",size:"s",onClick:()=>p(c.id),"data-cy":"approvers-add-and"},_react2.default.createElement("span",{className:"whitespace-nowrap text-xs"},o("dashboard.rule.details.add.and"))))),_react2.default.createElement("div",null,_react2.default.createElement("div",{className:"my-4 flex w-full grow flex-col"},_react2.default.createElement("span",{className:"py-1/2 w-fit bg-primary px-1 text-neutral-100 rounded-md"},o("dashboard.rule.details.conjunctions")),c.and.map(u=>_react2.default.createElement("div",{className:"approvers__group-item ml-6 ",key:u.id},_react2.default.createElement("div",{className:"approvers__group-wrapper border-primary-300 mb-2 flex grow flex-col border"},_react2.default.createElement("div",{className:"flex w-full grow flex-row justify-end gap-x-2 p-2"},_react2.default.createElement(i.Button,{type:"button",variant:"warning",size:"s",onClick:()=>y(c.id,u.id)},_react2.default.createElement("span",{className:"whitespace-nowrap text-xs"},o("dashboard.rule.details.remove.and"))),_react2.default.createElement(i.Button,{type:"button",variant:"secondary",size:"s",onClick:()=>v(c.id,u.id),"data-cy":"approvers-add-or"},_react2.default.createElement("span",{className:"text-xs"},o("dashboard.rule.details.add.or")))),!!u.or.length&&_react2.default.createElement("div",{className:"ml-2"},_react2.default.createElement("span",{className:"py-1/2 w-fit bg-primary px-1 text-neutral-100 rounded-md"},o("dashboard.rule.details.disjunctions")),_react2.default.createElement("div",{className:"flex flex-col pl-6"},u.or.map(b=>_react2.default.createElement("div",{key:b.id,className:"approvers__group-item flex flex-row items-center gap-x-2 pb-2"},_react2.default.createElement("span",{className:"approvers__group-wrapper"},o("dashboard.rule.details.associate.role")),_react2.default.createElement("div",{className:"w-1/2"},_react2.default.createElement(i.Select,{options:n,value:b.associateRole.key,onChange:x=>g(c.id,u.id,b.id,x)})),_react2.default.createElement(i.Button,{type:"button",variant:"warning",size:"s",onClick:()=>h(c.id,u.id,b.id)},_react2.default.createElement("span",{className:"whitespace-nowrap text-xs"},o("dashboard.rule.details.remove.or"))))))))))))))),_react2.default.createElement("div",{className:"mt-2 w-full border-t pt-2"},_react2.default.createElement(i.Button,{type:"button",variant:"primary",onClick:t,"data-cy":"approvers-preview"},o("dashboard.rule.details.preview")))):null},wt=Do;var To=(r,e)=>{let[t,n]=_react.useState.call(void 0, {currencies:[],countries:[],states:[]}),o=_react.useMemo.call(void 0, ()=>{let{countries:s,currencies:l}=t;return!s.length||!l.length?{}:{"total.price":{label:e("common.total.price"),type:"text"},country:{label:e("common.country"),type:"select",fieldSettings:{listValues:s}},currency:{label:e("common.currency"),type:"select",fieldSettings:{listValues:l}},"totalPrice.centAmount":{label:e("common.total.price.cent.amount"),type:"number"},"totalPrice.currencyCode":{label:e("common.total.price.currency.code"),type:"select",fieldSettings:{listValues:l}},"taxedPrice.net":{label:e("common.net.taxed.price"),type:"text"},"taxedPrice.net.centAmount":{label:e("common.net.taxed.price.cent.amount"),type:"number"},"taxedPrice.net.currencyCode":{label:e("common.net.taxed.price.currency.code"),type:"select",fieldSettings:{listValues:l}},"taxedPrice.gross":{label:e("common.gross.taxed.price"),type:"text"},"taxedPrice.gross.centAmount":{label:e("common.gross.taxed.price.cent.amount"),type:"number"},"taxedPrice.gross.currencyCode":{label:e("common.gross.taxed.price.currency.code"),type:"select",fieldSettings:{listValues:l}},createdAt:{label:e("common.created.at"),type:"datetime"},"shippingAddress.firstName":{label:e("common.shipping.address.first.name"),type:"text"},"shippingAddress.lastName":{label:e("common.shipping.address.last.name"),type:"text"},"shippingAddress.streetName":{label:e("common.shipping.address.street.name"),type:"text"},"shippingAddress.streetNumber":{label:e("common.shipping.address.street.number"),type:"text"},"shippingAddress.additionalStreetInfo":{label:e("common.shipping.address.additional.street.info"),type:"text"},"shippingAddress.postalCode":{label:e("common.shipping.address.postal.code"),type:"text"},"shippingAddress.city":{label:e("common.shipping.address.city"),type:"text"},"shippingAddress.state":{label:e("common.shipping.address.state"),type:"text"},"shippingAddress.country":{label:e("common.shipping.address.country"),type:"select",fieldSettings:{listValues:s}},"billingAddress.firstName":{label:e("common.billing.address.first.name"),type:"text"},"billingAddress.lastName":{label:e("common.billing.address.last.name"),type:"text"},"billingAddress.streetName":{label:e("common.billing.address.street.name"),type:"text"},"billingAddress.streetNumber":{label:e("common.billing.address.street.number"),type:"text"},"billingAddress.additionalStreetInfo":{label:e("common.billing.address.additional.street.info"),type:"text"},"billingAddress.postalCode":{label:e("common.billing.address.postal.code"),type:"text"},"billingAddress.city":{label:e("common.billing.address.city"),type:"text"},"billingAddress.state":{label:e("common.billing.address.state"),type:"text"},"billingAddress.country":{label:e("common.billing.address.country"),type:"select",fieldSettings:{listValues:s}},"billingAddress.company":{label:e("common.billing.address.company"),type:"text"},"shippingInfo.shippingMethodName":{label:e("common.shipping.info.shipping.method.name"),type:"text"},"shippingInfo.price":{label:e("common.shipping.info.price"),type:"text"},"shippingInfo.price.centAmount":{label:e("common.shipping.info.price.cent.amount"),type:"number"},"shippingInfo.price.currencyCode":{label:e("common.shipping.info.price.currency.code"),type:"select",fieldSettings:{listValues:l}},"shippingInfo.shippingRate.price":{label:e("common.shipping.info.shipping.rate.price"),type:"text"},"shippingInfo.shippingRate.price.centAmount":{label:e("common.shipping.info.shipping.rate.price.cent.amount"),type:"number"},"shippingInfo.shippingRate.price.currencyCode":{label:e("common.shipping.info.shipping.rate.price.currency.code"),type:"select",fieldSettings:{listValues:l}},"shippingInfo.shippingRate.freeAbove":{label:e("common.shipping.info.shipping.rate.free.above"),type:"text"},"shippingInfo.shippingRate.freeAbove.centAmount":{label:e("common.shipping.info.shipping.rate.free.above.cent.amount"),type:"number"},"shippingInfo.shippingRate.freeAbove.currencyCode":{label:e("common.shipping.info.shipping.rate.free.above.currency.code"),type:"select",fieldSettings:{listValues:l}},"shippingInfo.taxRate.name":{label:e("common.shipping.info.tax.rate.name"),type:"text"},"shippingInfo.taxRate.amount":{label:e("common.shipping.info.tax.rate.amount"),type:"number"},"shippingInfo.taxRate.includedInPrice":{label:e("common.shipping.info.tax.rate.included.in.price"),type:"boolean"},"shippingInfo.taxRate.country":{label:e("common.shipping.info.tax.rate.country"),type:"select",fieldSettings:{listValues:s}},"shippingInfo.taxRate.state":{label:e("common.shipping.info.tax.rate.state"),type:"text"},"customer.email":{label:e("common.customer.email"),type:"text"},"customer.customerNumber":{label:e("common.customer.number"),type:"text"},"customer.customerGroup.key":{label:e("common.customer.group.key"),type:"text"},"customer.firstName":{label:e("common.customer.first.name"),type:"text"},"customer.lastName":{label:e("common.customer.last.name"),type:"text"},"customer.middleName":{label:e("common.customer.middle.name"),type:"text"},"customer.title":{label:e("common.customer.title"),type:"text"},"customer.isEmailVerified":{label:e("common.customer.is.email.verified"),type:"boolean"},"customer.externalId":{label:e("common.customer.external.id"),type:"text"},"customer.createdAt":{label:e("common.customer.created.at"),type:"datetime"}}},[t.countries,t.currencies]),i=_react.useMemo.call(void 0, ()=>Object.keys(o).length>0,[o]);return _react.useEffect.call(void 0, ()=>{(async()=>{let s=await r.callAction({actionName:"project/getProjectSettings"});s.isError||n(s.data)})()},[]),{fields:o,isReady:i}},At=To;var _ui = require('@react-awesome-query-builder/ui');var St=()=>_react2.default.createElement("style",null,`
    .predicateBuilder .qb-drag-handler {
      display: none;
    }
    .predicateBuilder .group-or-rule-container.group-container {
      padding: 0.5rem;
      margin-top: 0.5rem;
      border-width: 1px;
    }
    .predicateBuilder .group--actions {
      display: flex;
      column-gap: 0.5rem;
      justify-content: flex-end;
    }
    .predicateBuilder .group--actions button {
      overflow: hidden;
      position: relative;
      padding-top: 0.5rem;
      padding-bottom: 0.5rem;
      padding-left: 1.5rem;
      padding-right: 1.5rem;
      border-radius: 4px;
      outline-offset: 0px;
      font-weight: 500;
      font-size: 0.75rem;
      line-height: 1rem;
      transition-property: background-color, border-color, color, fill, stroke, opacity, box-shadow, transform;
      transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
      transition-duration: 300ms;
      background-color: rgb(23 58 95);
      color: #ffffff;
    }

    .predicateBuilder .group--conjunctions input[type='radio'],
    .predicateBuilder .rule--widget--BOOLEAN .widget--widget input[type='radio'] {
      display: none;
    }
    .predicateBuilder .group--conjunctions label,
    .predicateBuilder .rule--widget--BOOLEAN .widget--widget label {
      display: inline-block;
      line-height: 24px;
      padding-left: 0.25rem;
      padding-right: 0.25rem;
      border-width: 1px;
      border-radius: 4px;
      text-align: center;
      cursor: pointer;
      color: #000000;
    }
    .predicateBuilder .group--conjunctions input[type='radio']:checked + label,
    .predicateBuilder .rule--widget--BOOLEAN .widget--widget input[type='radio']:checked + label {
      color: #ffffff;
      background-color: rgb(23 58 95);
    }
    .predicateBuilder .rule {
      display: flex;
      margin-top: 0.5rem;
      align-items: center;
    }
    .predicateBuilder .rule .rule--body {
      display: flex;
      column-gap: 0.25rem;
      align-items: center;
      flex-wrap: nowrap;
    }
    .predicateBuilder .rule .rule--body .rule--value .rule--widget {
      display: flex;
      column-gap: 0.25rem;
      align-items: center;
    }
    .predicateBuilder .rule .rule--header button {
      display: flex;
      padding-top: 0.5rem;
      padding-bottom: 0.5rem;
      padding-left: 1.5rem;
      padding-right: 1.5rem;
      margin-left: 0.5rem;
      flex-direction: row;
      justify-content: center;
      align-items: center;
      border-radius: 4px;
      border-width: 1px;
      border-color: transparent;
      font-size: 0.75rem;
      line-height: 1rem;
      font-weight: 500;
      color: #ffffff;
      background-color: rgb(205 63 80);
      transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;
      transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
      transition-duration: 300ms;
      transition-duration: 200ms;
      transition-timing-function: cubic-bezier(0, 0, 0.2, 1);
    }
    .predicateBuilder .rule .rule--widget--DATETIME {
      display: flex;
      flex-direction: column;
    }
    .predicateBuilder .rule .rule--widget--TEXT input,
    .predicateBuilder .rule .rule--widget--DATETIME input,
    .predicateBuilder .rule .rule--widget--NUMBER input {
      display: flex;
      border-radius: 0.125rem;
      border-width: 1px;
      border-color: #d1d5db;
      color: #4b5563;
      background-color: #ffffff;
      padding-right: 0;
      padding-left: 0.75rem;
      width: 100%;
    }
    .predicateBuilder .rule .rule--operator select {
      display: flex;
      border-radius: 0.125rem;
      border-width: 1px;
      border-color: #d1d5db;
      color: #4b5563;
      background-color: #ffffff;
      padding-right: 0;
      padding-left: 0.75rem;
      width: 100%;
    }
    .predicateBuilder .rule .rule--field select {
      display: flex;
      border-radius: 0.125rem;
      border-width: 1px;
      border-color: #d1d5db;
      color: #4b5563;
      background-color: #ffffff;
      padding-right: 0;
      padding-left: 0.75rem;
      width: 100%;
    }
  `);var U=_ui.BasicConfig,Pt=r=>({config:_react.useMemo.call(void 0, ()=>({...U,settings:{...U.settings,showNot:!1,showErrorMessage:!0,forceShowConj:!0,canReorder:!1,deleteLabel:"Remove rule",delGroupLabel:"Remove group"},types:{...U.types,text:{...U.types.text,valueSources:["value"]},select:{...U.types.select,valueSources:["value"]},number:{...U.types.number,valueSources:["value"]},boolean:{...U.types.boolean,valueSources:["value"]},datetime:{...U.types.datetime,valueSources:["value"]}},fields:r,widgets:{...U.widgets,text:{...U.widgets.text},datetime:{...U.widgets.datetime,spelFormatValue:t=>`"${new Date(t).toISOString()}"`}},operators:{...U.operators,equal:{...U.operators.equal,labelForFormat:"=",spelFormatOp:(t,n,o)=>`${t} = ${o}`},select_equals:{...U.operators.select_equals,labelForFormat:"=",spelFormatOp:(t,n,o)=>`${t} = ${o}`},not_between:{...U.operators.not_between,spelFormatOp:(t,n,o)=>`${t} < "${o[0]}" and ${t} > "${o[1]}"`},select_any_in:{...U.operators.select_any_in,spelFormatOp:(t,n,o)=>{let i=o.match(/\{(.*)\}\.\?\[true\]/);if(_optionalChain([i, 'optionalAccess', _291 => _291[1]])){let s=i[1].replaceAll("'","").split(",");return`${t} contains any (${s.map(l=>`"${l}"`).join(", ")})`}return""}},select_not_any_in:{...U.operators.select_not_any_in,spelFormatOp:(t,n,o)=>{let i=o.match(/\{(.*)\}\.\?\[true\]/);if(_optionalChain([i, 'optionalAccess', _292 => _292[1]])){let s=i[1].replaceAll("'","").split(",");return`not ${t} contains any (${s.map(l=>`"${l}"`).join(", ")})`}return""}}},conjunctions:{AND:{...U.conjunctions.AND,spelFormatConj:(t,n,o,i)=>(o&&(i=!1),t.size>1?(o?"!":"")+(i?"":"(")+t.join(" and ")+(i?"":")"):(o?"!(":"")+t.first()+(o?")":""))},OR:{...U.conjunctions.OR,spelFormatConj:(t,n,o,i)=>(o&&(i=!1),t.size>1?(o?"!":"")+(i?"":"(")+t.join(" or ")+(i?"":")"):(o?"!(":"")+t.first()+(o?")":""))}}}),[])});var Uo=({fields:r,translate:e,predicateJsonFormat:t,predicate:n,components:o,onUpdate:i,onUpdateJson:s,onError:l,onPreview:a})=>{let{config:d}=Pt(r),[p,y]=_react.useState.call(void 0, {tree:_ui.Utils.checkTree(_ui.Utils.loadTree(t||{id:_ui.Utils.uuid(),type:"group"}),d),config:d}),v=_react.useCallback.call(void 0, (g,c)=>{y(m=>({...m,tree:g,config:c}));try{let m=_ui.Utils.spelFormat(g,d);m&&i(m.replaceAll("'",'"'));let u=_ui.Utils.getTree(g);s(u)}catch(m){console.log(m)}},[i]);_react.useEffect.call(void 0, ()=>{if(d&&n){let g=n.replace(/(?<![<=>!])=(?!=)/g,"=="),[c,m]=_ui.Utils.loadFromSpel(g,d),u=_ui.Utils.checkTree(c,d);if(m.length){l();return}y({tree:u,config:d})}},[]);let h=_react.useCallback.call(void 0, g=>_react2.default.createElement("div",{className:"query-builder-container mb-2"},_react2.default.createElement("div",{className:"query-builder qb-lite"},_react2.default.createElement(_ui.Builder,{...g}))),[]);return _react2.default.createElement("div",{className:"w-full"},_react2.default.createElement(St,null),_react2.default.createElement("div",{className:"predicateBuilder max-h-[400px] overflow-x-hidden overflow-y-scroll"},_react2.default.createElement(_ui.Query,{...d,value:p.tree,onChange:v,renderBuilder:h})),_react2.default.createElement("div",{className:"bordet-t border-primary-300"},_react2.default.createElement(o.Button,{variant:"primary",size:"s",onClick:a,"data-cy":"predicate-preview-button"},e("dashboard.rule.predicate.preview"))))},kt=Uo;var Wo=_dynamic2.default.call(void 0, ()=>Promise.resolve().then(() => _interopRequireWildcard(require("./approvers-preview-OMVVS546.cjs"))),{ssr:!1}),Ho=({components:r,sdk:e,rule:t,translate:n,roleOptions:o,activeBusinessUnit:i,permissions:s,storeKey:l,isEditing:a})=>{let{back:d,refresh:p}=_navigation.useRouter.call(void 0, ),[y,v]=_react.useState.call(void 0, ""),[h,g]=_react.useState.call(void 0, !1),[c,m]=_react.useState.call(void 0, !1),[u,b]=_react.useState.call(void 0, {duplicate:!1,stateChange:!1,save:!1}),[x,w]=_react.useState.call(void 0, ),{fields:k,isReady:O}=At(e,n),E=_react.useMemo.call(void 0, ()=>t?{name:t.name,description:t.description,predicate:t.predicate,status:t.status,approvers:t.approvers,requesters:t.requesters}:{name:"",description:"",predicate:"",status:"Inactive",approvers:{tiers:[]},requesters:[]},[t]),[C,N]=_react.useState.call(void 0, E),F=_react.useMemo.call(void 0, ()=>!_optionalChain([s, 'optionalAccess', _293 => _293.UpdateApprovalRules]),[s]),{activateRule:I,deactivateRule:A,createRule:B,updateRule:V}=K(e,i.key,l),W=async()=>{if(b({...u,stateChange:!0}),t.status==="Active")try{await A(t.id),N({...C,status:"Inactive"})}catch(j){console.error(j)}else try{await I(t.id),N({...C,status:"Active"})}catch(j){console.error(j)}b({...u,stateChange:!1}),p(),d()},R=_react.useCallback.call(void 0, j=>{N({...C,[j.target.name]:j.target.value})},[C]),re=_react.useCallback.call(void 0, j=>{let J=[..._nullishCoalesce(C.requesters, () => ([]))];J.some(he=>he.associateRole.key===j)?J=J.filter(he=>he.associateRole.key!==j):J=[...J,{associateRole:{key:j,typeId:"associate-role"}}],N({...C,requesters:J})},[C]),Le=j=>{N({...C,status:j?"Active":"Inactive"})},Tt=j=>{N({...C,approvers:{tiers:j}})},$t=j=>{N({...C,predicate:j})},jt=async()=>{if(b({...u,save:!0}),a)try{await V(t.id,C),p(),v("")}catch(j){v(j.message)}finally{b({...u,save:!1})}else try{await B(C),d(),v("")}catch(j){v(j.message)}finally{b({...u,save:!1})}},Ot=()=>{v("Predicate cannot be displayed in the query builder"),m(!0)};return _react2.default.createElement("div",{className:""},F&&_react2.default.createElement(r.InfoBanner,{className:"mt-3"},_react2.default.createElement("b",null,n("common.view.only"))," ",n("dashboard.rule.details.view.only.desc")),_react2.default.createElement("div",{className:"flex items-center justify-between"},_react2.default.createElement("h1",{className:"py-6 text-18 font-extrabold text-gray-800 md:py-7 md:text-20 lg:py-9 lg:text-24"},n("dashboard.rule.details")),_react2.default.createElement("div",{className:"flex items-center justify-normal gap-x-3"},_react2.default.createElement(r.PreviousPageLink,null),a&&_react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement(r.Button,{size:"s",variant:"warning",disabled:F,onClick:W,loading:u.stateChange},t.status==="Active"?n("dashboard.rule.details.deactivate"):n("dashboard.rule.details.activate"))),_react2.default.createElement(r.Button,{size:"s",variant:"primary",disabled:F,onClick:jt,loading:u.save},n("dashboard.rule.details.save")))),!!y&&_react2.default.createElement(r.InfoBanner,{className:"mt-3"},_react2.default.createElement("b",null,y)),_react2.default.createElement("form",{className:"grid grid-cols-6 gap-x-2 gap-y-4 py-8"},_react2.default.createElement("div",{className:"col-span-3"},_react2.default.createElement(r.Input,{name:"name",label:n("dashboard.rule.new.name"),disabled:F,required:!0,value:_nullishCoalesce(C.name, () => ("")),onChange:R})),_react2.default.createElement("div",{className:"col-span-3"},_react2.default.createElement(r.Input,{name:"description",label:n("dashboard.rule.new.description"),disabled:F,required:!0,value:_nullishCoalesce(C.description, () => ("")),onChange:R})),_react2.default.createElement("div",{className:"col-span-3"},_react2.default.createElement(r.Label,{required:!0},n("dashboard.roles")),_react2.default.createElement(r.RefinementDropdown,{disabled:F,options:_optionalChain([o, 'optionalAccess', _294 => _294.map, 'call', _295 => _295(j=>({...j,selected:(_nullishCoalesce(C.requesters, () => ([]))).some(J=>_optionalChain([J, 'optionalAccess', _296 => _296.associateRole, 'optionalAccess', _297 => _297.key])===j.value)}))]),onChange:re},(_nullishCoalesce(C.requesters, () => ([]))).map(j=>_optionalChain([j, 'optionalAccess', _298 => _298.associateRole, 'optionalAccess', _299 => _299.key])).join(", "))),_react2.default.createElement("div",{className:"col-span-3 flex items-end"},_react2.default.createElement(r.Checkbox,{label:`${n("dashboard.rule.details.status")} = ${n(`dashboard.rules.status.${C.status.toLowerCase()}`)}`,disabled:F,checked:C.status==="Active",onChecked:Le})),_react2.default.createElement("h2",{className:"col-span-6 py-6 text-16 font-extrabold text-gray-800 md:py-7 md:text-18 lg:py-9 lg:text-20"},n("dashboard.rule.details.predicate")),!c&&O&&!F&&_react2.default.createElement("div",{className:"col-span-6"},_react2.default.createElement(kt,{fields:k,components:r,translate:n,onError:Ot,predicate:C.predicate,predicateJsonFormat:x,onUpdate:$t,onUpdateJson:w,onPreview:()=>m(!0)})),(c||F)&&_react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement("div",{className:"col-span-5"},_react2.default.createElement(r.Input,{type:"text",name:"predicate",disabled:F||!a,label:n("dashboard.rule.new.predicate"),value:_optionalChain([C, 'optionalAccess', _300 => _300.predicate]),onChange:R})),_react2.default.createElement("div",{className:"col-span-1 flex items-end"},_react2.default.createElement(r.Button,{variant:"secondary",type:"button",size:"m",disabled:F,onClick:()=>m(!1)},n("dashboard.rule.details.edit.predicate")))),_react2.default.createElement("h2",{className:"col-span-6 py-6 text-16 font-extrabold text-gray-800 md:py-7 md:text-18 lg:py-9 lg:text-20"},n("dashboard.rule.details.approvers")),_react2.default.createElement("div",{className:"col-span-6"},!h&&!a&&_react2.default.createElement(wt,{onUpdate:Tt,onPreview:()=>g(!0),tiers:C.approvers.tiers,associateRoles:o,translate:n,components:r}),(h||a)&&_react2.default.createElement(Wo,{isPreview:a,tiers:C.approvers.tiers,onEdit:()=>g(!1),components:r,translate:n}))))},Bt=Ho;var Ko={ApprovalFlowsPanel:ut,ApprovalRulesPanel:xt,ApprovalFlowsDetails:ht,ApprovalRulesDetails:Bt},_o={useApprovals:K};exports.ApprovalWorkflows = Me; exports.ConfigurableProducts = De; exports.SuperuserB2BFrontend = Be; exports.SuperuserFrontend = Fe;
